{"title":"Error Handling and Exceptions","markdown":{"headingText":"Error Handling and Exceptions","containsRefs":false,"markdown":"\nWhen writing Python scripts, errors are inevitable. For example, a file might be missing, a dataset may not load correctly, or a user may type the wrong parameter.  \nPython provides a mechanism called **exceptions** to handle such errors gracefully instead of letting the program crash.\n\nIn GIS scripting with ArcPy, error handling is especially important because geoprocessing tools often fail if inputs are invalid or if files already exist.\n\n---\n\n## What is an Exception?\n\nAn **exception** is an error that occurs during program execution.  \nCommon Python exceptions include:\n\n- `FileNotFoundError` â†’ File does not exist  \n- `ZeroDivisionError` â†’ Division by zero  \n- `ValueError` â†’ Wrong value or data type  \n- `TypeError` â†’ Wrong data type in operation  \n- `arcpy.ExecuteError` â†’ ArcPy tool execution failed  \n\n---\n\n## The tryâ€“except Block\n\nWe can use a **tryâ€“except** block to catch and handle exceptions.\n\n```{python}\ntry:\n    x = 10 / 0   # This will cause ZeroDivisionError\nexcept ZeroDivisionError:\n    print(\"You cannot divide by zero!\")\n```\n\n---\n\n## Handling Multiple Exceptions\n\nWe can catch different exceptions with multiple `except` blocks.\n\n```{python}\ntry:\n    number = int(\"abc\")   # This will cause ValueError\nexcept ValueError:\n    print(\"Invalid number!\")\nexcept TypeError:\n    print(\"Type error occurred!\")\n```\n\n---\n\n## Using finally\n\nThe `finally` block always runs, whether an error occurred or not.  \nIt is useful for cleanup (closing files, releasing resources, etc.).\n\n```{python}\ntry:\n    file = open(\"data.txt\")\n    content = file.read()\nexcept FileNotFoundError:\n    print(\"File not found!\")\nfinally:\n    print(\"This block always executes.\")\n```\n\n---\n\n## Raising Exceptions\n\nSometimes we want to raise an exception intentionally if something is wrong.\n\n```{python}\ndef calculate_area(length, width):\n    if length <= 0 or width <= 0:\n        raise ValueError(\"Length and width must be positive numbers\")\n    return length * width\n\n# Uncomment below to test\n# print(calculate_area(-5, 10))\n```\n\n---\n\n## Error Handling in ArcPy\n\nArcPy provides a special exception called **`arcpy.ExecuteError`**, which is raised when a geoprocessing tool fails.\n\n```{python}\nimport arcpy\n\narcpy.env.workspace = r\"D:/GIS_Data/OSM/shape\"\ntry:\n    # Try running a buffer on a non-existent dataset\n    arcpy.Buffer_analysis(\"non_existent.shp\", \"output.shp\", \"50 Meters\")\nexcept arcpy.ExecuteError:\n    print(\"ArcPy tool failed:\", arcpy.GetMessages(2))  # Get error messages\nexcept Exception as e:\n    print(\"Unexpected error:\", e)\n```\n\n---\n\n## Practical Example: Safe Buffer Script\n\n```{python}\nimport arcpy\n\ndef safe_buffer(input_fc, output_fc, distance):\n    try:\n        arcpy.Buffer_analysis(input_fc, output_fc, distance)\n        print(f\"Buffer created: {output_fc}\")\n    except arcpy.ExecuteError:\n        print(\"Buffer tool failed:\", arcpy.GetMessages(2))\n    except Exception as e:\n        print(\"Unexpected error:\", e)\n\n# Example usage\nsafe_buffer(\"roads.shp\", \"roads_buffer.shp\", \"50 Meters\")\n```\n\n---\n\n## Common Exceptions Reference Table\n\n\n| Exception Type        | Description | GIS/ArcPy Example |\n|-----------------------|-------------|-------------------|\n| `FileNotFoundError`   | File or directory not found | Trying to open a missing shapefile |\n| `PermissionError`     | No permission to read/write | Attempting to overwrite a locked file |\n| `ZeroDivisionError`   | Division by zero | Calculating density with area = 0 |\n| `ValueError`          | Wrong value or type | Passing a string instead of a number |\n| `TypeError`           | Operation on wrong type | Adding a string and an integer |\n| `IndexError`          | Index out of range | Accessing a list element that does not exist |\n| `KeyError`            | Key not found in dictionary | Accessing a missing field in a dict |\n| `MemoryError`         | Out of memory | Processing very large raster in memory |\n| `arcpy.ExecuteError`  | ArcPy tool execution failed | Buffer or Clip failed due to bad input |\n| `arcpy.ExecuteWarning`| Tool ran with warnings | Projection mismatch, empty outputs |\n\nðŸ’¡ Keep this table handy when debugging scripts. Most issues in Python or ArcPy will map to one of these exceptions.\n\n---\n\n## Summary\n\nIn this chapter, we learned:  \n\n- What exceptions are and why they occur.  \n- How to use **tryâ€“exceptâ€“finally** for error handling.  \n- How to raise exceptions deliberately.  \n- How to handle **ArcPy errors** with `arcpy.ExecuteError`.  \n- A practical GIS example: a safe buffer script with error handling.  \n- A quick reference table of **common exceptions** in Python and ArcPy.  \n\n---\n\n## Exercises\n\n1. Write a function that divides two numbers and uses `tryâ€“except` to avoid division by zero.  \n2. Modify the safe buffer script to check if the output file already exists. If it does, print a warning instead of overwriting.  \n3. Use `arcpy.Clip_analysis()` in a tryâ€“except block and handle both ArcPy errors and general exceptions.  \n\n---\n","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":true,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":true,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"jupyter"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"number-sections":true,"css":["../../styles/styles.css"],"citeproc":true,"output-file":"chapter5_error_handling_exceptions.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.7.32","bibliography":["../../references.bib"],"csl":"../../styles/apa-6th-edition.csl","theme":"cosmo","fig-cap-location":"bottom","fig-num":true},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}